---
# ConfigMap - Non-sensitive configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: servicedesk-config
  labels:
    app: servicedesk
    component: config
data:
  # Application Configuration
  NEXT_PUBLIC_APP_URL: "https://servicedesk.example.com"
  NEXT_PUBLIC_API_URL: "https://servicedesk.example.com/api"
  APP_VERSION: "1.0.0"

  # Database Configuration (non-sensitive)
  DB_POOL_MIN: "2"
  DB_POOL_MAX: "10"
  DB_POOL_IDLE_TIMEOUT: "30000"
  DB_POOL_ACQUIRE_TIMEOUT: "5000"

  # Redis Configuration (non-sensitive)
  REDIS_HOST: "servicedesk-redis"
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  REDIS_CLUSTER: "false"
  ENABLE_REDIS_CACHE: "true"

  # Cache TTL Configuration
  CACHE_TTL: "3600"
  CACHE_TTL_SHORT: "300"
  CACHE_TTL_MEDIUM: "1800"
  CACHE_TTL_LONG: "7200"
  CACHE_TTL_STATIC: "86400"

  # Password Policy
  MIN_PASSWORD_LENGTH: "8"
  REQUIRE_PASSWORD_SPECIAL_CHARS: "true"
  REQUIRE_PASSWORD_NUMBERS: "true"
  REQUIRE_PASSWORD_UPPERCASE: "true"

  # Session Configuration
  SESSION_DURATION: "28800"
  MAX_LOGIN_ATTEMPTS: "5"
  LOCKOUT_DURATION: "30"
  JWT_EXPIRES_IN: "28800"
  REFRESH_TOKEN_DURATION: "7"

  # Email Configuration
  EMAIL_PROVIDER: "smtp"
  SMTP_HOST: "smtp.gmail.com"
  SMTP_PORT: "587"
  SMTP_SECURE: "false"
  EMAIL_FROM_NAME: "ServiceDesk"
  EMAIL_FROM_ADDRESS: "noreply@servicedesk.com"

  # File Upload Limits
  MAX_FILE_SIZE_MB: "10"
  ALLOWED_FILE_TYPES: "image/jpeg,image/png,image/gif,application/pdf,text/plain"

  # Rate Limiting
  ENABLE_RATE_LIMITING: "true"
  RATE_LIMIT_API: "60"
  RATE_LIMIT_AUTH: "5"
  RATE_LIMIT_PUBLIC: "30"
  BYPASS_RATE_LIMIT: "false"

  # CORS Configuration
  CORS_ORIGINS: "https://servicedesk.example.com"
  ALLOWED_ORIGINS: "https://servicedesk.example.com"
  FRONTEND_URL: "https://servicedesk.example.com"

  # Feature Flags
  ENABLE_KNOWLEDGE_BASE: "true"
  ENABLE_ANALYTICS: "true"
  ENABLE_WORKFLOWS: "true"
  ENABLE_GAMIFICATION: "false"
  ENABLE_PWA: "true"
  ENABLE_REALTIME_NOTIFICATIONS: "true"

  # Multi-tenancy
  ENABLE_MULTI_TENANCY: "true"
  DEFAULT_TENANT_SLUG: "empresa-demo"
  ALLOW_TENANT_REGISTRATION: "false"

  # Compliance & Privacy
  ENABLE_DATA_RETENTION: "true"
  DATA_RETENTION_DAYS: "365"
  ENABLE_AUDIT_LOGS: "true"
  AUDIT_LOG_RETENTION_DAYS: "730"
  ENABLE_CONSENT_MANAGEMENT: "true"

  # Localization
  DEFAULT_LANGUAGE: "pt-BR"
  SUPPORTED_LANGUAGES: "pt-BR,en-US,es-ES"
  DEFAULT_TIMEZONE: "America/Sao_Paulo"

  # Development & Testing
  DEBUG: "false"
  LOG_SQL_QUERIES: "false"
  ENABLE_MOCK_DATA: "false"
  SKIP_EMAIL_VERIFICATION: "false"
  LOG_LEVEL: "info"

  # Advanced Configuration
  ENABLE_COMPRESSION: "true"
  ENABLE_HTTP2: "false"
  TRUST_PROXY: "true"
  WORKER_THREADS: "2"

  # Storage Configuration
  STORAGE_PROVIDER: "local"
  LOCAL_STORAGE_PATH: "/app/uploads"

  # AI Configuration
  OPENAI_MODEL: "gpt-4o-mini"
  AI_TEMPERATURE: "0.7"
  ENABLE_AI_CLASSIFICATION: "false"
  ENABLE_AI_SENTIMENT_ANALYSIS: "false"
  ENABLE_AI_DUPLICATE_DETECTION: "false"
  ENABLE_AI_AUTO_RESPONSE: "false"

  # MFA Configuration
  ENFORCE_2FA_FOR_ADMIN: "true"

  # SSO Configuration
  ENABLE_SSO: "false"

  # Webhook Configuration
  ENABLE_WEBHOOK_RETRY: "true"
  WEBHOOK_TIMEOUT: "10000"

  # Datadog Configuration
  DD_SERVICE: "servicedesk"
  DD_ENV: "production"
  DD_VERSION: "1.0.0"
  DD_AGENT_HOST: "datadog-agent.monitoring.svc.cluster.local"
  DD_TRACE_AGENT_PORT: "8126"
  DD_DOGSTATSD_PORT: "8125"
  DD_TRACE_ENABLED: "true"
  DD_TRACE_DEBUG: "false"
  DD_TRACE_SAMPLE_RATE: "1.0"
  DD_TRACE_ANALYTICS_ENABLED: "true"
  DD_LOGS_ENABLED: "true"
  DD_LOGS_INJECTION: "true"
  DD_PROFILING_ENABLED: "false"

  # Sentry Configuration
  SENTRY_ENVIRONMENT: "production"
  SENTRY_ERROR_SAMPLE_RATE: "1.0"
  SENTRY_TRACES_SAMPLE_RATE: "0.1"

  # Performance Monitoring
  ENABLE_PERFORMANCE_MONITORING: "true"
