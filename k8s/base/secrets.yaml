---
# ============================================================================
# KUBERNETES SECRETS TEMPLATE - CRITICAL SECURITY NOTICE
# ============================================================================
#
# WARNING: This is a TEMPLATE file only - DO NOT apply directly to production!
# NEVER commit real secrets to version control!
#
# SECURITY BEST PRACTICES:
# -----------------------
# 1. PRODUCTION: Use External Secrets Operator or Sealed Secrets (see below)
# 2. STAGING/DEV: Use kubectl create secret from command line
# 3. NEVER use "REPLACE_WITH_*" placeholder values in any environment
#
# ============================================================================
# OPTION 1: External Secrets Operator (RECOMMENDED FOR PRODUCTION)
# ============================================================================
# Use cloud-native secret managers with automatic rotation:
# - AWS Secrets Manager: https://aws.amazon.com/secrets-manager/
# - GCP Secret Manager: https://cloud.google.com/secret-manager
# - Azure Key Vault: https://azure.microsoft.com/en-us/services/key-vault/
# - HashiCorp Vault: https://www.vaultproject.io/
#
# Documentation: https://external-secrets.io/
#
# Example (AWS Secrets Manager):
# ------------------------------
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: servicedesk-secrets
#   namespace: servicedesk
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: aws-secretsmanager
#     kind: SecretStore
#   target:
#     name: servicedesk-secrets
#   data:
#     - secretKey: JWT_SECRET
#       remoteRef:
#         key: servicedesk/production
#         property: jwt_secret
#
# ============================================================================
# OPTION 2: Sealed Secrets (RECOMMENDED FOR GitOps)
# ============================================================================
# Install: kubectl apply -f https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.24.0/controller.yaml
#
# 1. Create secret from command line (see OPTION 3)
# 2. Convert to sealed secret:
#    kubeseal --format=yaml < secrets.yaml > sealed-secrets.yaml
# 3. Commit sealed-secrets.yaml to git (safe to commit)
# 4. Apply: kubectl apply -f sealed-secrets.yaml
#
# Documentation: https://github.com/bitnami-labs/sealed-secrets
#
# ============================================================================
# OPTION 3: kubectl create secret (DEVELOPMENT/STAGING ONLY)
# ============================================================================
# Generate all secrets with strong cryptographic randomness:
# -----------------------------------------------------------
#
# Complete setup command (copy and execute as-is):
#
# kubectl create secret generic servicedesk-secrets \
#   --namespace=servicedesk \
#   --from-literal=JWT_SECRET=$(openssl rand -hex 64) \
#   --from-literal=SESSION_SECRET=$(openssl rand -hex 64) \
#   --from-literal=NEXTAUTH_SECRET=$(openssl rand -base64 32) \
#   --from-literal=MFA_SECRET=$(openssl rand -hex 32) \
#   --from-literal=CSRF_SECRET=$(openssl rand -hex 32) \
#   --from-literal=SSO_ENCRYPTION_KEY=$(openssl rand -hex 32) \
#   --from-literal=WEBHOOK_SECRET=$(openssl rand -hex 32) \
#   --from-literal=POSTGRES_PASSWORD=$(openssl rand -hex 32) \
#   --from-literal=REDIS_PASSWORD=$(openssl rand -hex 32) \
#   --from-literal=DATABASE_URL="postgresql://servicedesk:REPLACE_WITH_GENERATED_PASSWORD@servicedesk-postgres:5432/servicedesk?sslmode=require" \
#   --from-literal=REDIS_URL="redis://:REPLACE_WITH_GENERATED_PASSWORD@servicedesk-redis:6379/0" \
#   --from-literal=DD_API_KEY="your-datadog-api-key-or-leave-empty" \
#   --from-literal=SENTRY_AUTH_TOKEN="your-sentry-token-or-leave-empty" \
#   --from-literal=OPENAI_API_KEY="sk-proj-your-key-or-leave-empty" \
#   --dry-run=client -o yaml | kubectl apply -f -
#
# NOTE:
# - Replace DATABASE_URL and REDIS_URL passwords with actual generated values
# - Replace optional service API keys or leave empty if not using those services
# - After creating the secret, update DATABASE_URL and REDIS_URL with the generated passwords
#
# To verify secret creation:
# kubectl get secret servicedesk-secrets -n servicedesk
# kubectl describe secret servicedesk-secrets -n servicedesk
#
# To view secret values (debugging only - be careful):
# kubectl get secret servicedesk-secrets -n servicedesk -o jsonpath='{.data.JWT_SECRET}' | base64 -d
#
# ============================================================================
# TEMPLATE MANIFEST (DO NOT APPLY DIRECTLY)
# ============================================================================
# This manifest is provided for reference only.
# IMPORTANT:
# - All "REPLACE_BEFORE_DEPLOY" values MUST be replaced
# - Use one of the methods above instead of applying this file
# - Applying this file will create non-functional secrets
# ============================================================================

apiVersion: v1
kind: Secret
metadata:
  name: servicedesk-secrets
  namespace: servicedesk
  labels:
    app: servicedesk
    component: secrets
  annotations:
    description: "TEMPLATE ONLY - Replace all REPLACE_BEFORE_DEPLOY values"
    security.notice: "NEVER commit real secrets to version control"
    deployment.warning: "DO NOT apply this template directly to any environment"
type: Opaque
stringData:
  # ============================================================================
  # CRITICAL SECURITY SECRETS - REQUIRED IN ALL ENVIRONMENTS
  # ============================================================================
  # IMPORTANT: Use kubectl create secret command above or External Secrets Operator

  # JWT Secret - REQUIRED
  # Generate with: openssl rand -hex 64
  # Must be at least 64 characters
  JWT_SECRET: "REPLACE_BEFORE_DEPLOY"

  # Session Secret - REQUIRED
  # Generate with: openssl rand -hex 64
  # Must be at least 64 characters
  SESSION_SECRET: "REPLACE_BEFORE_DEPLOY"

  # NextAuth Secret - REQUIRED (if using NextAuth)
  # Generate with: openssl rand -base64 32
  NEXTAUTH_SECRET: "REPLACE_BEFORE_DEPLOY"

  # MFA Secret - REQUIRED (if MFA enabled)
  # Generate with: openssl rand -hex 32
  MFA_SECRET: "REPLACE_BEFORE_DEPLOY"

  # CSRF Secret - REQUIRED
  # Generate with: openssl rand -hex 32
  CSRF_SECRET: "REPLACE_BEFORE_DEPLOY"

  # SSO Encryption Key - REQUIRED (if SSO enabled)
  # Generate with: openssl rand -hex 32
  SSO_ENCRYPTION_KEY: "REPLACE_BEFORE_DEPLOY"

  # Webhook Secret - REQUIRED (if webhooks enabled)
  # Generate with: openssl rand -hex 32
  WEBHOOK_SECRET: "REPLACE_BEFORE_DEPLOY"

  # ============================================================================
  # DATABASE CONFIGURATION
  # ============================================================================

  # PostgreSQL Password - REQUIRED
  # Generate with: openssl rand -hex 32
  POSTGRES_PASSWORD: "REPLACE_BEFORE_DEPLOY"

  # Database URL - REQUIRED
  # Format: postgresql://user:password@host:5432/database?sslmode=require
  # SECURITY: Always use sslmode=require in production
  DATABASE_URL: "postgresql://servicedesk:REPLACE_BEFORE_DEPLOY@servicedesk-postgres:5432/servicedesk?sslmode=require"

  # ============================================================================
  # REDIS CONFIGURATION
  # ============================================================================

  # Redis Password - REQUIRED
  # Generate with: openssl rand -hex 32
  REDIS_PASSWORD: "REPLACE_BEFORE_DEPLOY"

  # Redis URL (constructed from password above)
  REDIS_URL: "redis://:REPLACE_BEFORE_DEPLOY@servicedesk-redis:6379/0"

  # ============================================================================
  # EMAIL CONFIGURATION (Optional)
  # ============================================================================

  # SMTP Credentials
  # Get app password from: https://myaccount.google.com/apppasswords
  SMTP_USER: "REPLACE_BEFORE_DEPLOY"
  SMTP_PASS: "REPLACE_BEFORE_DEPLOY"
  SMTP_PASSWORD: "REPLACE_BEFORE_DEPLOY"

  # ============================================================================
  # AI / MACHINE LEARNING (Optional)
  # ============================================================================

  # OpenAI API Key
  # Get from: https://platform.openai.com/api-keys
  # SECURITY: Keep this secret - API usage costs money
  OPENAI_API_KEY: "REPLACE_BEFORE_DEPLOY"

  # ============================================================================
  # SSO PROVIDERS (Optional - Configure only if using SSO)
  # ============================================================================

  # Google OAuth
  # Get from: https://console.cloud.google.com/apis/credentials
  GOOGLE_CLIENT_ID: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  GOOGLE_CLIENT_SECRET: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # Microsoft Azure AD
  # Get from: https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps
  MICROSOFT_CLIENT_ID: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  MICROSOFT_CLIENT_SECRET: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  AZURE_AD_CLIENT_ID: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  AZURE_AD_CLIENT_SECRET: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  AZURE_AD_TENANT_ID: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # GitHub OAuth
  # Get from: https://github.com/settings/developers
  GITHUB_CLIENT_ID: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  GITHUB_CLIENT_SECRET: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # Okta SAML
  # Get from: https://your-domain.okta.com/admin
  OKTA_ISSUER: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  OKTA_ENTRY_POINT: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  OKTA_CERT: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # Gov.br (Brazilian Government SSO)
  # Get from: https://sso.acesso.gov.br
  GOVBR_CLIENT_ID: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  GOVBR_CLIENT_SECRET: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # ============================================================================
  # WHATSAPP BUSINESS API (Optional)
  # ============================================================================

  # WhatsApp Configuration
  # Get from: https://developers.facebook.com/apps
  WHATSAPP_PHONE_NUMBER_ID: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  WHATSAPP_ACCESS_TOKEN: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  # Generate with: openssl rand -hex 32
  WHATSAPP_WEBHOOK_VERIFY_TOKEN: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  # Generate with: openssl rand -hex 32
  WHATSAPP_WEBHOOK_SECRET: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # ============================================================================
  # CLOUD STORAGE & AWS SERVICES (Optional)
  # ============================================================================

  # AWS Credentials
  # Get from: https://console.aws.amazon.com/iam/home#/security_credentials
  AWS_ACCESS_KEY_ID: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  AWS_SECRET_ACCESS_KEY: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  AWS_S3_ACCESS_KEY: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  AWS_S3_SECRET_KEY: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # ============================================================================
  # EMAIL SERVICES (Optional)
  # ============================================================================

  # SendGrid
  # Get from: https://app.sendgrid.com/settings/api_keys
  SENDGRID_API_KEY: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # Mailgun
  # Get from: https://app.mailgun.com/app/account/security/api_keys
  MAILGUN_API_KEY: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # ============================================================================
  # MONITORING & ERROR TRACKING (Optional but Recommended)
  # ============================================================================

  # Sentry Error Tracking
  # Get from: https://sentry.io/settings/
  # NOTE: DSN is public and safe to expose, AUTH_TOKEN is secret
  SENTRY_DSN: "https://public-key@sentry.io/project-id"
  NEXT_PUBLIC_SENTRY_DSN: "https://public-key@sentry.io/project-id"
  SENTRY_AUTH_TOKEN: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  SENTRY_ORG: "your-org-slug"
  SENTRY_PROJECT: "servicedesk"

  # Datadog APM
  # Get from: https://app.datadoghq.com/organization-settings/api-keys
  # SECURITY: This key grants access to your Datadog account
  DD_API_KEY: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # ============================================================================
  # THIRD-PARTY INTEGRATIONS (Optional)
  # ============================================================================

  # Slack
  SLACK_WEBHOOK_URL: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  SLACK_BOT_TOKEN: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # Discord
  DISCORD_WEBHOOK_URL: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # Jira
  JIRA_API_TOKEN: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # Zendesk
  ZENDESK_API_TOKEN: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # ============================================================================
  # PWA PUSH NOTIFICATIONS (Optional)
  # ============================================================================

  # VAPID Keys - Generate with: npx web-push generate-vapid-keys
  # SECURITY: Keep VAPID_PRIVATE_KEY secret
  NEXT_PUBLIC_VAPID_PUBLIC_KEY: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  VAPID_PRIVATE_KEY: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # ============================================================================
  # SEARCH & ANALYTICS (Optional)
  # ============================================================================

  # Elasticsearch
  ELASTICSEARCH_API_KEY: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"
  ELASTICSEARCH_PASSWORD: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # ============================================================================
  # ADDITIONAL CLOUD STORAGE (Optional)
  # ============================================================================

  # Azure Blob Storage
  AZURE_STORAGE_KEY: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # Google Cloud Storage (use service account JSON key file)
  GCS_CREDENTIALS_PATH: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

  # CDN
  CDN_API_KEY: "REPLACE_BEFORE_DEPLOY_OR_LEAVE_EMPTY"

# ============================================================================
# END OF TEMPLATE
# ============================================================================
# Remember: Use External Secrets Operator or kubectl create secret command
# NEVER apply this template file directly to any environment
