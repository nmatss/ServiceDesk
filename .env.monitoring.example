# ============================================
# MONITORING & OBSERVABILITY CONFIGURATION
# ============================================
# Complete configuration for all monitoring services
# Copy this to .env.local and fill in your values

# ============================================
# PROMETHEUS METRICS
# ============================================
# Optional API key to protect /api/metrics endpoint
METRICS_API_KEY=your-secure-random-key-here

# ============================================
# SENTRY ERROR TRACKING
# ============================================
# Get your DSN from: https://sentry.io/settings/projects/
SENTRY_DSN=https://examplePublicKey@o0.ingest.sentry.io/0
SENTRY_ORG=your-organization
SENTRY_PROJECT=servicedesk

# Environment name (development, staging, production)
SENTRY_ENVIRONMENT=production

# Release version (use git SHA in production)
SENTRY_RELEASE=$(git rev-parse HEAD)

# Auth token for uploading source maps (from https://sentry.io/settings/account/api/auth-tokens/)
SENTRY_AUTH_TOKEN=your-auth-token-here

# Sampling rates (0.0 to 1.0)
SENTRY_ERROR_SAMPLE_RATE=1.0        # 100% of errors
SENTRY_TRACES_SAMPLE_RATE=0.1       # 10% of traces (save costs in production)

# ============================================
# DATADOG APM & TRACING
# ============================================
# Enable/disable Datadog tracing
DD_TRACE_ENABLED=true

# Service identification
DD_SERVICE=servicedesk
DD_ENV=production
DD_VERSION=1.0.0

# Datadog Agent configuration
DD_AGENT_HOST=localhost             # Datadog agent hostname
DD_TRACE_AGENT_PORT=8126           # Datadog agent APM port

# Sampling configuration
DD_TRACE_SAMPLE_RATE=0.1           # 10% sampling (1.0 = 100%)
DD_TRACE_DEBUG=false               # Enable debug logging (development only)

# Advanced features
DD_PROFILING_ENABLED=true          # Enable continuous profiling
DD_TRACE_ANALYTICS_ENABLED=true    # Enable trace analytics
DD_CUSTOM_METRICS_ENABLED=true     # Enable custom metrics via spans

# Runtime metrics
DD_RUNTIME_METRICS_ENABLED=true    # Enable Node.js runtime metrics

# Log injection (adds trace IDs to logs)
DD_LOGS_INJECTION=true

# ============================================
# STRUCTURED LOGGING
# ============================================
# Log level (error, warn, info, http, verbose, debug, silly)
LOG_LEVEL=info

# Enable console logging
LOG_CONSOLE=true

# Enable file logging
LOG_FILE=true

# Log directory
LOG_DIR=./logs

# Silent mode (disable all logging)
LOG_SILENT=false

# ============================================
# PAGERDUTY ALERTING
# ============================================
# Get your integration keys from: https://your-domain.pagerduty.com/service-directory
PAGERDUTY_INTEGRATION_KEY_DEFAULT=your-default-service-key
PAGERDUTY_INTEGRATION_KEY_CRITICAL=your-critical-service-key
PAGERDUTY_INTEGRATION_KEY_WARNING=your-warning-service-key
PAGERDUTY_INTEGRATION_KEY_SECURITY=your-security-service-key

# ============================================
# SLACK NOTIFICATIONS
# ============================================
# Create incoming webhooks at: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL_ALERTS=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_WEBHOOK_URL_BUSINESS=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_WEBHOOK_URL_SECURITY=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Slack channels
SLACK_CHANNEL_ALERTS=#servicedesk-alerts
SLACK_CHANNEL_BUSINESS=#servicedesk-metrics
SLACK_CHANNEL_SECURITY=#servicedesk-security

# ============================================
# GRAFANA DASHBOARDS
# ============================================
# Grafana instance URL
GRAFANA_URL=http://localhost:3000

# Grafana API key (create at: /org/apikeys)
GRAFANA_API_KEY=your-grafana-api-key

# ============================================
# PROMETHEUS
# ============================================
# Prometheus scrape URL (for health checks)
PROMETHEUS_URL=http://localhost:9090

# ============================================
# HEALTH CHECK CONFIGURATION
# ============================================
# Enable detailed health checks
HEALTH_CHECK_DETAILED=true

# Health check timeout (milliseconds)
HEALTH_CHECK_TIMEOUT=5000

# ============================================
# FEATURE FLAGS
# ============================================
# Enable/disable specific monitoring features
MONITORING_METRICS_ENABLED=true
MONITORING_TRACING_ENABLED=true
MONITORING_LOGGING_ENABLED=true
MONITORING_PROFILING_ENABLED=true

# ============================================
# DEVELOPMENT OVERRIDES
# ============================================
# Override for local development
# Uncomment and modify as needed

# LOG_LEVEL=debug
# LOG_CONSOLE=true
# LOG_FILE=false
# DD_TRACE_ENABLED=false
# DD_TRACE_DEBUG=true
# SENTRY_TRACES_SAMPLE_RATE=1.0

# ============================================
# PRODUCTION RECOMMENDATIONS
# ============================================
# For production, use these settings:
#
# LOG_LEVEL=info
# LOG_CONSOLE=false
# LOG_FILE=true
# DD_TRACE_ENABLED=true
# DD_TRACE_SAMPLE_RATE=0.1
# DD_PROFILING_ENABLED=true
# SENTRY_ERROR_SAMPLE_RATE=1.0
# SENTRY_TRACES_SAMPLE_RATE=0.1
